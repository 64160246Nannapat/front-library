<template>
  <v-main style="height: 500px; margin-top: -60px">
    <!-- <HomeStudent /> -->
    <v-main>
      <v-container>
        <div class="header">
          <img class="header-image" src="@/assets/library (1).png" alt="Library Image" />
          <h1>‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏ô‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠</h1>
        </div>
        <v-form ref="bookForm" v-model="valid">
          <!-- ‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ä‡∏∑‡πà‡∏≠ -->
          <div class="form-row">
            <label for="name">‡∏Ñ‡∏≥‡∏ô‡∏≥‡∏´‡∏ô‡πâ‡∏≤:</label>
            <v-text-field
              v-model="book.Prefix"
              :rules="[rules.required]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- ‡∏ä‡∏∑‡πà‡∏≠ -->
          <div class="form-row">
            <label for="name">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏™‡∏ô‡∏≠:</label>
            <v-text-field
              v-model="book.Name"
              :rules="[rules.required]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á -->
          <div class="form-row">
            <label for="role">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</label>
            <v-select
              v-model="book.Role"
              :items="roles"
              :rules="[rules.required]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-select>
          </div>

          <!-- ‡∏Ñ‡∏ì‡∏∞ -->
          <div class="form-row">
            <label for="faculty">‡∏Ñ‡∏ì‡∏∞:</label>
            <v-select
              v-model="book.Faculty"
              :items="faculty"
              :rules="[rules.required]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-select>
          </div>

          <!-- ‡∏™‡∏≤‡∏Ç‡∏≤ -->
          <div class="form-row">
            <label for="major">‡∏™‡∏≤‡∏Ç‡∏≤:</label>
            <v-select
              v-model="book.Major"
              :items="major"
              :rules="[rules.required]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-select>
          </div>

          <!-- ‡πÄ‡∏ö‡∏≠‡∏£‡πå -->
          <div class="form-row">
            <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå:</label>
            <v-text-field
              v-model="book.Phone"
              :rules="[rules.required, rules.phone]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- E-mail -->
          <div class="form-row">
            <label for="email">E-mail:</label>
            <v-text-field
              v-model="book.Email"
              :rules="[rules.required, rules.email]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤ (Dropdown) -->
          <div class="form-row">
            <label for="store">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤:</label>
            <v-select
              v-model="book.Store"
              :items="stores"
              :rules="[rules.required]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-select>
          </div>

          <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ -->
          <div class="form-row">
            <label for="title">‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠:</label>
            <v-text-field
              v-model="book.Title"
              :rules="[rules.required]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- ‡∏ú‡∏π‡πâ‡πÅ‡∏ï‡πà‡∏á -->
          <div class="form-row">
            <label for="author">‡∏ú‡∏π‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏ï‡πà‡∏á:</label>
            <v-text-field
              v-model="book.Author"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- ‡∏õ‡∏µ‡∏û‡∏¥‡∏°‡∏û‡πå -->
          <div class="form-row">
            <label for="year">‡∏õ‡∏µ‡∏û‡∏¥‡∏°‡∏û‡πå:</label>
            <v-text-field
              v-model="book.Year"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- ISBN -->
          <div class="form-row">
            <label for="isbn">ISBN:</label>
            <v-text-field
              v-model="book.isbn"
              :rules="[rules.required, rules.isbn]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤ -->
          <div class="form-row">
            <label for="subject">‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤:</label>
            <v-text-field
              v-model="book.Subject"
              :rules="[rules.required]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏ó‡∏ò‡∏¥ -->
          <div class="form-row">
            <label for="price">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏∏‡∏ó‡∏ò‡∏¥:</label>
            <v-text-field
              v-model="book.Price"
              :rules="[rules.required, rules.number]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <!-- ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏•‡πà‡∏° -->
          <div class="form-row">
            <label for="count">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏•‡πà‡∏°:</label>
            <v-text-field
              v-model="book.Count"
              :rules="[rules.required, rules.number]"
              variant="outlined"
              class="text-feild-top"
              dense
            ></v-text-field>
          </div>

          <div class="form-row">
            <v-radio-group inline :rules="[rules.required, rules.radio]" class="custom-radio">
              <v-radio label="‡∏°‡∏µ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á" value="one" class="text-radiio"></v-radio>
              <v-radio label="‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á" value="two" class="text-radiio"></v-radio>
            </v-radio-group>
          </div>

          <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô -->
          <v-btn
            :disabled="!valid"
            elevation="8"
            class="mt-4 confirm-btn confirm-btnheight"
            style="background-color: #eed3d9"
            @click="submitForm(bookForm)"
          >
            ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
          </v-btn>
        </v-form>
        <!-- dialog ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•-->
        <v-dialog v-model="dialog" max-width="400px">
          <v-card class="dialog">
            <v-card-title class="text-center" style="font-weight: bold; font-size: 22px">
              üéâ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
            </v-card-title>
            <v-card-text class="text-center" style="font-size: 18px">
              ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß
            </v-card-text>
            <v-card-actions justify-center>
              <v-btn class="btn-dialog" @click="confirmReset(bookForm)"> ‡∏ï‡∏Å‡∏•‡∏á </v-btn>
            </v-card-actions>
          </v-card>
        </v-dialog>
      </v-container>
    </v-main>
  </v-main>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import HomeStudent from '@/components/student/HomeStudent.vue'
import { useRoute } from 'vue-router'
import RoleLayout from '@/components/RoleLayout.vue'
import BookForm from '@/components/BookForm.vue'
<<<<<<< HEAD
import axios from 'axios';
=======
>>>>>>> master

const bookForm = ref(null)
const formValid = ref(false)
const submitted = ref(false)
const valid = ref(false) //‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö v-form
const dialog = ref(false)
const inline = ref(null)

const route = useRoute()
// Get role from meta
const role = route.meta.role || 'default'

// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°
const book = ref({
  Prefix: '',
  Name: '',
  Role: '',
  Faculty: '',
  Phone: '',
  Major: '',
  Email: '',
  Store: '',
  Title: '',
  Author: '',
  Year: '',
  isbn: '',
  Subject: '',
  Price: '',
  Count: '',
})

const rules = {
  required: (value: string) => {
    return !value ? '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•' : true
  },
  email: (value: string) =>
    /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(value) || '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á',
  phone: (value: string) => /^[0-9]{10}$/.test(value) || '‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ 10 ‡∏´‡∏•‡∏±‡∏Å',
  isbn: (value: string) => /^(97(8|9))?\d{9}(\d|X)$/.test(value) || '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ISBN ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á',
  number: (value: string) => /^[1-9]+$/.test(value) || '‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô',
  radio: (value) => !!value || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å',
}

const submitForm = async (bookForm: any) => {
  if (bookForm) {
    const { valid: isValid } = await bookForm.validate() // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö validate

    if (isValid) {
<<<<<<< HEAD
      // try {
      //   // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á API
      //   await axios.post('http://http://localhost:3000/', book.value);
=======
>>>>>>> master
      submitted.value = true // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
      dialog.value = true // ‡πÅ‡∏™‡∏î‡∏á Dialog
      // ‡πÑ‡∏°‡πà‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
    } else {
      submitted.value = false
      console.log('Validation Failed')
    }
  }
}

const confirmReset = (bookForm: any) => {
  dialog.value = false // ‡∏õ‡∏¥‡∏î Dialog
  resetForm(bookForm) // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏î "‡∏ï‡∏Å‡∏•‡∏á"
}

const resetForm = (bookForm: any) => {
  book.value = {
    Prefix: '',
    Name: '',
    Role: '',
    Faculty: '',
    Phone: '',
    Major: '',
    Email: '',
    Store: '',
    Title: '',
    Author: '',
    Year: '',
    isbn: '',
    Subject: '',
    Price: '',
    Count: '',
  }

  bookForm.reset() // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï v-form
  submitted.value = false
}

const stores = ['‡∏£‡πâ‡∏≤‡∏ô A', '‡∏£‡πâ‡∏≤‡∏ô B', '‡∏£‡πâ‡∏≤‡∏ô C']
const roles = ['‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå', '‡∏ô‡∏¥‡∏™‡∏¥‡∏ï', '‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£', '‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏à‡∏±‡∏¢']
const faculty = ['‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', '‡∏Ñ‡∏ì‡∏∞‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£', '‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®', '‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå']
const major = [
  '‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå',
  '‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏∏‡∏ï‡∏™‡∏≤‡∏´‡∏Å‡∏£‡∏£‡∏°‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•',
  '‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏ã‡∏≠‡∏ü‡∏ï‡πå‡πÅ‡∏ß‡∏£‡πå',
  '‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏õ‡∏£‡∏∞‡∏î‡∏¥‡∏©‡∏ê‡πå‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞',
]
</script>

<style scoped>
.header {
  display: flex;
  align-items: center;
  margin-bottom: 20px;
}

.header-image {
  width: 60px;
  height: auto;
  margin-right: 15px;
}

h1 {
  font-size: 24px;
  font-weight: bold;
  margin-bottom: 20px;
  margin: 0;
}

.v-container {
  margin-top: 20px;
}

/* ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏ñ‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô */
.form-row {
  display: flex;
  align-items: center;
  margin-bottom: 16px;
  font-size: 20px;
  justify-content: space-between;
}

.form-row label {
  min-width: 120px; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
  margin-right: 10px;
  font-weight: bold;
  text-align: center;
  justify-content: center;
  font-size: 20px;
}

.text-feild-top {
  margin-top: 20px;
  min-height: 50px;
}

.v-text-field,
.v-select {
  flex-grow: 1; /* ‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ */
}

.confirm-btn {
  font-size: 20px;
  font-weight: bold;
  text-align: center;
  justify-content: center;
  display: flex;
  align-items: center;
  margin-left: auto;
  transition: background-color 0.3s ease; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° transition ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢ */
}

.confirm-btnheight {
  width: 150px;
  height: 50px;
}

.dialog {
  background-color: #eed3d9;
}

.btn-dialog {
  font-size: 16px;
  font-weight: bold; /* ‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤ */
  border-radius: 25px; /* ‡∏Ç‡∏≠‡∏ö‡∏°‡∏ô */
  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3); /* ‡πÄ‡∏á‡∏≤ */
  background-color: #e0e6f0; /* ‡∏™‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏õ‡∏∏‡πà‡∏° */
  color: black; /* ‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ */
}

.v-radio-group {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  align-items: center;
}

.v-radio {
  margin-right: 16px;
  font-size: 24px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
  color: black;
}

.custom-radio {
  font-size: 24px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
  color: black;
}

.text-radiio {
  font-weight: bold;
  font-size: 24px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
  color: black;
}
</style>
